# Pages and layouts

## Layouts

If you are using layouts in your app for multiple pages, you will have to update the component that renders the page content. In Nuxt 2, this is the `<Nuxt />` component. You will have to replace that component with a `<slot />` in Nuxt 3.

### Example: `~/layouts/custom.vue`

::code-group

```vue [Nuxt 2]
<template>
  <div id="app-layout">
    <main>
      <Nuxt />
    </main>
  </div>
</template>
```

```vue [Nuxt 3]
<template>
  <div id="app-layout">
    <main>
      <slot />
    </main>
  </div>
</template>
```

::

## Pages

The format for pages in Nuxt 3 is slighly different than Nuxt 2 and you will need to update your codebase to reflect these changes

### Static Pages

These pages should remain the same. As long as you have an `index.vue` file or a name like `users.vue` the routes should continue to resolve as follows:

`/` -> `pages/index.vue`
`/users` -> `pages/users.vue`


### Dynamic Route Parameters
A dynamic route parameter would be something like a `slug` in a blog post or an `id` of a user. This is where the syntax slightly changes in Nuxt 3 from Nuxt 2.

Let's say you have the following URLs for users:
- `/users`
- `/users/{user}`

You would have to migrate your page syntax that resolves to these parameters as follows:

::code-block

``` [Nuxt 2]
- URL: /users
- Page: /pages/users/index.vue

- URL: /users/{user}
- Page: /pages/users/_user.vue
```

``` [Nuxt 3]
- URL: /users
- Page: /pages/users/index.vue

- URL: /users/{user}
- Page: /pages/users/[user].vue
```

::code-block

The biggest difference is the migration from an underscore to represent dynamic route data (`_`) to brackets (`[]`). The brackets also will work for folders as well, similar to the underscores used in Nuxt 3.

With that being said, you could also structure your page directory as follows:

::code-block

``` [Nuxt 2]
- URL: /users
- Page: /pages/users/index.vue

- URL: /users/{user}
- Page: /pages/users/_user/index.vue

- URL: /users/{user}/edit
- Page: /pages/users/_user/edit.vue
```

``` [Nuxt 3]
- URL: /users
- Page: /pages/users/index.vue

- URL: /users/{user}
- Page: /pages/users/[user]/index.vue

- URL: /users/{user}/edit
- Page: /pages/users/[user]/edit.vue
```

::code-block

You might want to consider that structure if you are including an `edit.vue` (`/users/{user}/edit) page or some other nested static page that lives under a specific user. Or if you have multiple pages with sub children (see next section).

### Nested Dynamic Route Parameters
Let's say you have a more complex route set up with a sub page under users that also includes a dynamic route parameter:

- `/users/{user}/companies/{company}`

To structure a URL like this, you will need to migrate your `_` syntax to a bracked `[]` syntax to be compatible with Nuxt 3.

::code-block

``` [Nuxt 2]
- URL: /users/{user}/companies
- Page: /pages/users/_user/companies/index.vue

- URL: /users/{user}/companies/{company}
- Page: /pages/users/_user/companies/_company.vue
```

``` [Nuxt 3]
- URL: /users/{user}/companies
- Page: /pages/users/[user]/companies/index.vue

- URL: /users/{user}/companies/{company}
- Page: /pages/users/[user]/companies/[company].vue
```

::code-block

The big point to take away is that what you would do in Nuxt 2 with an underscore to represent a dynamic variable, you'd do with brackets in Nuxt 3. You will also have to update how you access these dynamic route parameters when migrating your app.

### Accessing Route Parameters
Since Nuxt 3 is on Vue 3, a wonderful composable `useRoute()` has been provided to access the dynamic route parameters. In Nuxt 2, you'd access the dynamic route variables through a global `this.$route.params` in your component, or through destructuring the `params` when accepting an arguement to your `asyncData`. 

Using the page structure above, the dynamic route variables would be `user` and `company`. Whatever was in the brackets or underscored when migrating.

To migrate the accessing of this data from Nuxt 2 to Nuxt 3 looks like the following:

::code-block

```vue [Nuxt 2]
<script>
export default {
    async asyncData({ params }){
        const user = params.user;
        const company = params.company

        return { user, company }
    },

    // In methods using this.$route
    // this.$route.params.user
    // this.$route.params.company
}
```

```vue [Nuxt 3]
<script setup>
    const route = useRoute();
    const userID = route.params.user;
    const companyID = route.params.company;

    const { user } = await useAsyncData('user', () => $fetch(`/api/users/${userID}`));
    const { company } = await useAsyncData('company', () => $fetch(`/api/users/${userID}/companies/${companyID}`));
</script>
```
::code-block
